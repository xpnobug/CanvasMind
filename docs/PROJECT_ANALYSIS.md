# CanvasMind é¡¹ç›®åˆ†ææ–‡æ¡£

## 1. é¡¹ç›®æ¦‚è¿°

**é¡¹ç›®åç§°**: CanvasMind ()
**è‹±æ–‡å**: canvasmind
**ç‰ˆæœ¬**: 0.1.0
**ç±»å‹**: AI å›¾åƒç”Ÿæˆå·¥å…·çš„å‰ç«¯åº”ç”¨
**æŠ€æœ¯æ ˆ**: Vue 3 + Vite
**è®¾è®¡å‚è€ƒ**: å³æ¢¦AI (jimeng.jianying.com) - å­—èŠ‚è·³åŠ¨ AI åˆ›ä½œå¹³å°

### 1.1 é¡¹ç›®å®šä½

CanvasMind æ˜¯ä¸€ä¸ªåŸºäº Vue 3 çš„ AI å›¾åƒç”Ÿæˆå·¥å…·å‰ç«¯åº”ç”¨ï¼Œå€Ÿé‰´**å³æ¢¦AI**çš„æ™ºèƒ½ç”»å¸ƒå’Œå¤šæ¨¡æ€åˆ›ä½œç†å¿µï¼Œæä¾›æ— é™ç”»å¸ƒäº¤äº’ç•Œé¢ï¼Œæ”¯æŒå›¾ç‰‡ç”Ÿæˆã€ç¼–è¾‘ã€å¯¹è¯å¼äº¤äº’ç­‰åŠŸèƒ½ã€‚

**ä¸å³æ¢¦AIçš„å…³ç³»**:
- **æ ¸å¿ƒç†å¿µå¯¹é½**: æ™ºèƒ½ç”»å¸ƒ + AI ç”Ÿæˆ + ç²¾ç»†åŒ–ç¼–è¾‘
- **äº¤äº’æ¨¡å¼å‚è€ƒ**: å¤šå›¾å±‚ç¼–è¾‘ã€å±€éƒ¨é‡ç»˜ã€ä¸€é”®æ‰©å›¾ç­‰
- **åˆ›æ–°æ–¹å‘**: æ›´å¼ºè°ƒå¯¹è¯å¼åä½œå’Œæ— é™ç”»å¸ƒçš„è‡ªç”±åº¦

### 1.2 æ ¸å¿ƒåŠŸèƒ½

**ç°æœ‰åŠŸèƒ½**:
- âœ… æ— é™ç”»å¸ƒï¼ˆInfinite Canvasï¼‰ï¼šå¯ç¼©æ”¾ã€æ‹–æ‹½çš„å›¾ç‰‡ç½‘æ ¼å¸ƒå±€
- âœ… å›¾ç‰‡ç”Ÿæˆä¸ç®¡ç†ï¼šAI ç”Ÿæˆå›¾ç‰‡çš„å±•ç¤ºã€é€‰æ‹©ã€é‡æ’åº
- âœ… å¯¹è¯å¼äº¤äº’ï¼šå³ä¾§å¯¹è¯é¢æ¿ï¼Œæ”¯æŒæ–‡æœ¬å’Œå›¾ç‰‡è¾“å…¥
- âœ… å·¥å…·æ ï¼šå¤šç§å›¾ç‰‡ç¼–è¾‘å·¥å…·ï¼ˆå±€éƒ¨é‡ç»˜ã€è¶…æ¸…ã€æŠ å›¾ã€æ‰©å›¾ç­‰ï¼‰
- âœ… æç¤ºè¯ç¼–è¾‘å™¨ï¼šåº•éƒ¨æµ®åŠ¨è¾“å…¥æ¡†ï¼Œæ”¯æŒ Agent æ¨¡å¼

**å¯¹æ ‡å³æ¢¦AIçš„åŠŸèƒ½**:
- ğŸ”² æ–‡ç”Ÿå›¾ï¼ˆText-to-Imageï¼‰: ç±»ä¼¼å³æ¢¦AIçš„AIç»˜ç”»
- ğŸ”² å›¾ç”Ÿå›¾ï¼ˆImage-to-Imageï¼‰: ä¿æŒä¸»ä½“ç‰¹å¾çš„åˆ›æ„æ”¹é€ 
- ğŸ”² å±€éƒ¨é‡ç»˜: ç²¾å‡†ç¼–è¾‘å›¾åƒå±€éƒ¨åŒºåŸŸ
- ğŸ”² æ™ºèƒ½æ‰©å›¾: ä¸€é”®æ‰©å±•ç”»å¸ƒè¾¹ç•Œ
- ğŸ”² æ™ºèƒ½æŠ å›¾: è‡ªåŠ¨è¯†åˆ«ä¸»ä½“å¹¶åˆ†ç¦»èƒŒæ™¯
- ğŸ”² å›¾å±‚ç®¡ç†: å¤šå›¾å±‚ç¼–è¾‘ä¸åˆæˆ

---

## 2. æŠ€æœ¯æ¶æ„

### 2.1 æ ¸å¿ƒä¾èµ–

```json
{
  "dependencies": {
    "vue": "^3.5.24"
  },
  "devDependencies": {
    "@vitejs/plugin-vue": "^6.0.1",
    "vite": "^7.2.4"
  }
}
```

- **æ„å»ºå·¥å…·**: Vite 7.2.4 - æä¾›å¿«é€Ÿçš„å¼€å‘æœåŠ¡å™¨å’Œä¼˜åŒ–çš„ç”Ÿäº§æ„å»º
- **å‰ç«¯æ¡†æ¶**: Vue 3.5.24 - ä½¿ç”¨ Composition API å’Œ `<script setup>` è¯­æ³•
- **æ¨¡å—ç±»å‹**: ESM (ES Module)

### 2.2 é¡¹ç›®ç»“æ„

```
canana-vue/
â”œâ”€â”€ index.html              # å…¥å£ HTML
â”œâ”€â”€ vite.config.js          # Vite é…ç½®
â”œâ”€â”€ package.json            # é¡¹ç›®é…ç½®
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.js            # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ App.vue            # æ ¹ç»„ä»¶
â”‚   â”œâ”€â”€ style.css          # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ styles/            # æ ·å¼æ–‡ä»¶å¤¹
â”‚   â”‚   â”œâ”€â”€ variables.css  # CSS å˜é‡
â”‚   â”‚   â””â”€â”€ reset.css      # æ ·å¼é‡ç½®
â”‚   â””â”€â”€ components/        # ç»„ä»¶ç›®å½•
â”‚       â”œâ”€â”€ Header.vue              # é¡¶éƒ¨æ ‡é¢˜æ 
â”‚       â”œâ”€â”€ InfiniteCanvas.vue      # æ— é™ç”»å¸ƒï¼ˆæ ¸å¿ƒï¼‰
â”‚       â”œâ”€â”€ LeftToolbar.vue         # å·¦ä¾§å·¥å…·æ 
â”‚       â”œâ”€â”€ BottomToolbar.vue       # åº•éƒ¨ç¼©æ”¾æ§åˆ¶
â”‚       â”œâ”€â”€ PromptEditor.vue        # æç¤ºè¯ç¼–è¾‘å™¨
â”‚       â””â”€â”€ RightPanel.vue          # å³ä¾§å¯¹è¯é¢æ¿
```

### 2.3 å¯åŠ¨è„šæœ¬

```json
"scripts": {
  "dev": "vite",              // å¼€å‘æœåŠ¡å™¨
  "build": "vite build",      // ç”Ÿäº§æ„å»º
  "preview": "vite preview"   // é¢„è§ˆæ„å»ºç»“æœ
}
```

---

## 3. ç»„ä»¶è¯¦ç»†åˆ†æ

### 3.1 App.vue - æ ¹ç»„ä»¶

**èŒè´£**: åº”ç”¨ä¸»å¸ƒå±€å’ŒçŠ¶æ€ç®¡ç†

**æ ¸å¿ƒçŠ¶æ€**:
```javascript
const zoom = ref(10)                    // ç¼©æ”¾æ¯”ä¾‹ (10%)
const projectTitle = ref('ç”ŸæˆäºŒæ¬¡å…ƒæ‰‹åŠå¤šé£æ ¼å›¾ç‰‡')  // é¡¹ç›®æ ‡é¢˜
const rightPanelOpen = ref(false)       // å³ä¾§é¢æ¿å¼€å…³
const selectedImage = ref(null)         // é€‰ä¸­çš„å›¾ç‰‡
const pendingMessage = ref('')          // å¾…å‘é€æ¶ˆæ¯
```

**å¸ƒå±€ç»“æ„**:
```
â”œâ”€â”€ Header (é¡¶éƒ¨æ )
â”œâ”€â”€ Main Content (ä¸»å†…å®¹åŒº)
â”‚   â”œâ”€â”€ Top Toolbar (é¡¶éƒ¨å·¥å…·æ  - é€‰ä¸­å›¾ç‰‡æ—¶æ˜¾ç¤º)
â”‚   â”œâ”€â”€ InfiniteCanvas (æ— é™ç”»å¸ƒ)
â”‚   â””â”€â”€ Bottom Toolbar (åº•éƒ¨å·¥å…·æ å ä½)
â”œâ”€â”€ LeftToolbar (å·¦ä¾§å·¥å…·æ )
â”œâ”€â”€ BottomToolbar (åº•éƒ¨æ§ä»¶)
â”œâ”€â”€ PromptEditor (æç¤ºè¯ç¼–è¾‘å™¨ - å³ä¾§é¢æ¿å…³é—­æ—¶æ˜¾ç¤º)
â””â”€â”€ RightPanel (å³ä¾§å¯¹è¯é¢æ¿)
```

**å…³é”®ç‰¹æ€§**:
- å“åº”å¼å®½åº¦ï¼šå³ä¾§é¢æ¿æ‰“å¼€æ—¶ä¸»å†…å®¹åŒºå®½åº¦è‡ªé€‚åº”
- é¡¶éƒ¨å·¥å…·æ ï¼šåªåœ¨é€‰ä¸­å›¾ç‰‡æ—¶æ˜¾ç¤ºï¼Œæä¾›8ç§å›¾ç‰‡ç¼–è¾‘å·¥å…·
- æ¶ˆæ¯ä¼ é€’ï¼šåº•éƒ¨ç¼–è¾‘å™¨å‘é€çš„æ¶ˆæ¯ä¼šä¼ é€’ç»™å³ä¾§å¯¹è¯é¢æ¿

---

### 3.2 InfiniteCanvas.vue - æ— é™ç”»å¸ƒï¼ˆæ ¸å¿ƒç»„ä»¶ï¼‰

**èŒè´£**: ç®¡ç†å›¾ç‰‡ç½‘æ ¼ã€æ‹–æ‹½ã€ç¼©æ”¾ã€é€‰æ‹©ç­‰äº¤äº’

#### 3.2.1 ç½‘æ ¼ç³»ç»Ÿ

```javascript
const GRID_COLS = 4           // 4åˆ—ç½‘æ ¼
const CELL_WIDTH = 1728       // å•å…ƒæ ¼å®½åº¦ (px)
const CELL_HEIGHT = 2304      // å•å…ƒæ ¼é«˜åº¦ (px)
const GAP = 96                // é—´è·
const PADDING = 192           // è¾¹è·
```

**ç½‘æ ¼å¸ƒå±€ç®—æ³•**:
```javascript
// æ ¹æ® index è®¡ç®—ç½‘æ ¼ä½ç½®
const getGridPosition = (index) => {
  const col = index % GRID_COLS
  const row = Math.floor(index / GRID_COLS)
  return {
    x: PADDING + col * (CELL_WIDTH + GAP),
    y: PADDING + row * (CELL_HEIGHT + GAP)
  }
}
```

#### 3.2.2 æ ¸å¿ƒåŠŸèƒ½

**1. è§†å£å˜æ¢ç³»ç»Ÿ**
```javascript
const viewport = reactive({
  x: 0,      // è§†å£ X åç§»
  y: 0,      // è§†å£ Y åç§»
  scale: 1   // ç¼©æ”¾æ¯”ä¾‹
})
```

**2. æ‹–æ‹½é‡æ’åº**
- æ”¯æŒå›¾ç‰‡åœ¨ç½‘æ ¼ä¸­æ‹–æ‹½é‡æ–°æ’åº
- å®æ—¶é¿è®©æ•ˆæœï¼šå…¶ä»–å›¾ç‰‡ä¼šä¸ºæ‹–æ‹½çš„å›¾ç‰‡è®©ä½
- é˜ˆå€¼æ£€æµ‹ï¼šç§»åŠ¨è¶…è¿‡ 5px æ‰è§¦å‘æ‹–æ‹½

**3. å›¾ç‰‡ç¼©æ”¾**
- å››è§’æ‹–æ‹½è°ƒæ•´å›¾ç‰‡å°ºå¯¸
- ä¿æŒå®½é«˜æ¯”
- æœ€å°å®½åº¦é™åˆ¶ 200px

**4. äº¤äº’æ¨¡å¼**
- **ç”»å¸ƒæ‹–æ‹½**: ç©ºæ ¼é”® + å·¦é”® / ä¸­é”® / Alt + å·¦é”®
- **æ»šè½®ç¼©æ”¾**: Ctrl/Cmd + æ»šè½® (ä»¥é¼ æ ‡ä½ç½®ä¸ºä¸­å¿ƒ)
- **å¹³ç§»**: æ»šè½®æ»šåŠ¨
- **å›¾ç‰‡é€‰æ‹©**: ç‚¹å‡»å›¾ç‰‡
- **å–æ¶ˆé€‰æ‹©**: Esc é”® / ç‚¹å‡»ç©ºç™½

#### 3.2.3 UI å…ƒç´ 

**1. æµ®åŠ¨å·¥å…·æ ** (é€‰ä¸­å›¾ç‰‡æ—¶æ˜¾ç¤º)
- é‡æ–°ç¼–è¾‘
- å†æ¬¡ç”Ÿæˆ
- æ·»åŠ åˆ°å¯¹è¯

**2. å°ºå¯¸æ ‡ç­¾**
- æ˜¾ç¤ºå½“å‰å›¾ç‰‡å°ºå¯¸
- è·Ÿéšå›¾ç‰‡ç§»åŠ¨

**3. é€‰ä¸­æ¡†**
- 3px é’è‰²è¾¹æ¡† (#00cae0)
- å››è§’ç¼©æ”¾æ‰‹æŸ„

**4. AI ç”Ÿæˆæ ‡ç­¾**
- æ˜¾ç¤ºåœ¨å›¾ç‰‡å·¦ä¸Šè§’
- åŠé€æ˜é»‘è‰²èƒŒæ™¯

---

### 3.3 Header.vue - é¡¶éƒ¨æ ‡é¢˜æ 

**èŒè´£**: é¡¹ç›®æ ‡é¢˜ã€å¯¼èˆªã€ç”¨æˆ·ä¿¡æ¯

**åŠŸèƒ½æ¨¡å—**:

**å·¦ä¾§åŒºåŸŸ**:
- è¿”å›æŒ‰é’® (é£æœºå›¾æ ‡)
- å¯ç¼–è¾‘æ ‡é¢˜ (ç‚¹å‡»åˆ‡æ¢ç¼–è¾‘æ¨¡å¼)
- èœå•æŒ‰é’® (æ±‰å ¡èœå•)

**å³ä¾§åŒºåŸŸ**:
- ç§¯åˆ†æ˜¾ç¤º: æ˜¾ç¤ºå‰©ä½™ç§¯åˆ† (48) å’Œä¼šå‘˜çŠ¶æ€
- åˆ†äº«æŒ‰é’®
- å¯¹è¯æŒ‰é’®: åˆ‡æ¢å³ä¾§é¢æ¿

**äº¤äº’ç»†èŠ‚**:
- æ ‡é¢˜ç¼–è¾‘ï¼šç‚¹å‡»æ ‡é¢˜è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼ŒæŒ‰ Enter ä¿å­˜ï¼ŒEsc å–æ¶ˆ
- æ¯›ç»ç’ƒæ•ˆæœï¼š`backdrop-filter: blur(20px)`

---

### 3.4 LeftToolbar.vue - å·¦ä¾§å·¥å…·æ 

**èŒè´£**: æä¾›ä¸»è¦ç¼–è¾‘å·¥å…·

**å·¥å…·åˆ—è¡¨**:
```javascript
const tools = [
  { id: 'select', icon: 'select', label: 'é€‰æ‹©ç§»åŠ¨å·¥å…·', shortcut: 'V' },
  { id: 'image', icon: 'image', label: 'å›¾ç‰‡ç”Ÿæˆ' },
  { id: 'video', icon: 'video', label: 'è§†é¢‘ç”Ÿæˆ' },
  { id: 'text', icon: 'text', label: 'æ–‡å­—å·¥å…·' },
  { id: 'element', icon: 'element', label: 'ç”»æ¿å·¥å…·' }
]
```

**ç‰¹æ€§**:
- å›ºå®šå®šä½åœ¨å±å¹•å·¦ä¾§å‚ç›´å±…ä¸­
- Hover æ˜¾ç¤ºå·¥å…·æç¤ºï¼ˆTooltipï¼‰
- éƒ¨åˆ†å·¥å…·æœ‰ä¸‹æ‹‰æŒ‡ç¤ºå™¨ (hasMore)
- æ¯›ç»ç’ƒèƒŒæ™¯æ•ˆæœ

---

### 3.5 BottomToolbar.vue - åº•éƒ¨ç¼©æ”¾æ§åˆ¶

**èŒè´£**: ç¼©æ”¾æ§åˆ¶å’Œå¸®åŠ©ä¸­å¿ƒ

**åŠŸèƒ½**:
- ç¼©æ”¾èŒƒå›´: 1% - 200%
- ç¼©æ”¾æ­¥è¿›: 10%
- å¸®åŠ©ä¸­å¿ƒæŒ‰é’® (é—®å·å›¾æ ‡)

**å¸ƒå±€**:
- å›ºå®šåœ¨å·¦ä¸‹è§’
- ä¸¤ä¸ªç‹¬ç«‹çš„æµ®åŠ¨å—ï¼šå¸®åŠ©ä¸­å¿ƒ + ç¼©æ”¾æ§åˆ¶

---

### 3.6 PromptEditor.vue - æç¤ºè¯ç¼–è¾‘å™¨

**èŒè´£**: åº•éƒ¨æµ®åŠ¨è¾“å…¥æ¡†ï¼Œç”¨äºè¾“å…¥ç”Ÿæˆæç¤ºè¯

#### 3.6.1 çŠ¶æ€ç®¡ç†

```javascript
const prompt = ref('')                  // æç¤ºè¯å†…å®¹
const isExpanded = ref(false)           // å±•å¼€/æŠ˜å çŠ¶æ€
const inspirationSearch = ref(true)     // çµæ„Ÿæœç´¢å¼€å…³
const creativeDesign = ref(true)        // åˆ›æ„è®¾è®¡å¼€å…³
```

#### 3.6.2 äº¤äº’æ¨¡å¼

**æŠ˜å çŠ¶æ€** (é»˜è®¤):
- èƒ¶å›Šå½¢çŠ¶ (border-radius: 28px)
- æœ€å¤§å®½åº¦ 480px
- æ˜¾ç¤ºè¾“å…¥æ¡†å’Œæäº¤æŒ‰é’®
- ç‚¹å‡»ä»»æ„ä½ç½®å±•å¼€

**å±•å¼€çŠ¶æ€**:
- åœ†è§’çŸ©å½¢ (border-radius: 16px)
- æœ€å¤§å®½åº¦ 680px
- æ˜¾ç¤ºå®Œæ•´å·¥å…·æ 

#### 3.6.3 å·¥å…·æ é€‰é¡¹

**æ¨¡å¼é€‰æ‹©å™¨**:
- Agent æ¨¡å¼ (é»˜è®¤)
- å¸¦ä¸‹æ‹‰ç®­å¤´

**å·¥å…·æŒ‰é’®**:
- é™„ä»¶ä¸Šä¼ 
- è‡ªåŠ¨è®¾ç½®
- çµæ„Ÿæœç´¢ (å¯åˆ‡æ¢)
- åˆ›æ„è®¾è®¡ (å¯åˆ‡æ¢)

**æäº¤æ–¹å¼**:
- ç‚¹å‡»æäº¤æŒ‰é’®
- æŒ‰ Enter é”®

**å¤–éƒ¨ç‚¹å‡»æ”¶èµ·**:
- è¾“å…¥æ¡†ä¸ºç©ºæ—¶ï¼Œç‚¹å‡»å¤–éƒ¨è‡ªåŠ¨æ”¶èµ·

---

### 3.7 RightPanel.vue - å³ä¾§å¯¹è¯é¢æ¿

**èŒè´£**: AI å¯¹è¯ç•Œé¢ï¼Œæ”¯æŒæ–‡æœ¬å’Œå›¾ç‰‡äº¤äº’

#### 3.7.1 æ¶ˆæ¯ç±»å‹

```javascript
// 1. ç”¨æˆ·çº¯æ–‡æœ¬æ¶ˆæ¯
{ type: 'user', content: 'ä¸€åªå¯çˆ±çš„è“è‰²çŒ«å’ª' }

// 2. AI å›¾ç‰‡å›å¤
{
  type: 'ai-images',
  summary: 'å¯çˆ±è“çŒ«å½¢è±¡ç”Ÿæˆ',
  collapsed: false,
  images: ['url1', 'url2', ...],
  totalCount: 7
}

// 3. ç”¨æˆ·å¸¦å‚è€ƒå›¾æ¶ˆæ¯
{
  type: 'user-with-ref',
  avatar: 'url',
  content: 'å‚è€ƒå›¾1çš„è§’è‰²ç‰¹å¾...',
  meta: 'å›¾ç‰‡ 4.1 | 3:4 | 2K'
}

// 4. ç”Ÿæˆçš„å›¾ç‰‡ç»„
{
  type: 'generated-images',
  images: ['url1', 'url2', 'url3', 'url4']
}
```

#### 3.7.2 å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½

**å †å å¡ç‰‡æ•ˆæœ**:
- æ”¶èµ·çŠ¶æ€ï¼šå›¾ç‰‡å †å ï¼Œå¸¦æ—‹è½¬è§’åº¦
- å±•å¼€çŠ¶æ€ï¼šå›¾ç‰‡æ¨ªå‘æ’åˆ—
- Hover æ˜¾ç¤ºï¼šæ™ºèƒ½å‚è€ƒæç¤º + å…³é—­æŒ‰é’®
- æ·»åŠ æŒ‰é’®ï¼šæ”¶èµ·æ—¶ä¸ºåœ†å½¢ï¼Œå±•å¼€æ—¶ä¸ºæ–¹å½¢

**äº¤äº’ç»†èŠ‚**:
```javascript
// CSS å˜é‡æ§åˆ¶åŠ¨ç”»
:style="{
  '--rotate': imagesExpanded ? '0deg' : `${(idx - length + 1) * 8}deg`,
  '--translate-x': imagesExpanded ? `${idx * 62}px` : '0px'
}"
```

#### 3.7.3 æ¶ˆæ¯æ“ä½œ

**AI æ¶ˆæ¯æ“ä½œ**:
- é‡æ–°ç”Ÿæˆ
- ç‚¹èµ/ç‚¹è¸©
- æŠ˜å /å±•å¼€

**å›¾ç‰‡æ¶ˆæ¯æ“ä½œ**:
- é‡æ–°ç¼–è¾‘
- å†æ¬¡ç”Ÿæˆ
- å‚æ•°è°ƒæ•´
- æ›´å¤šé€‰é¡¹

**å›¾ç‰‡é¢„è§ˆ**:
- ç‚¹å‡»å›¾ç‰‡å…¨å±é¢„è§ˆ
- ä½¿ç”¨ Teleport æ¸²æŸ“åˆ° body
- åŠé€æ˜é»‘è‰²èƒŒæ™¯é®ç½©
- å³ä¸Šè§’å…³é—­æŒ‰é’®

#### 3.7.4 åº•éƒ¨è¾“å…¥åŒº

**æ¸å˜èƒŒæ™¯**:
```css
background: linear-gradient(to top, var(--canvas-sidebar-bg) 80%, transparent);
```

**å·¥å…·æ æŒ‰é’®**:
- Agent æ¨¡å¼ (æ¿€æ´»çŠ¶æ€)
- é™„ä»¶ä¸Šä¼ 
- å‚æ•°è®¾ç½®
- çµæ„Ÿæœç´¢
- åˆ›æ„è®¾è®¡

**å‘é€é€»è¾‘**:
- æ–‡æœ¬æˆ–å›¾ç‰‡è‡³å°‘æœ‰ä¸€é¡¹
- Enter å‘é€ï¼ŒShift+Enter æ¢è¡Œ
- æ¨¡æ‹Ÿ AI å›å¤ï¼ˆ2ç§’å»¶è¿Ÿï¼‰

---

## 4. æ ·å¼ç³»ç»Ÿ

### 4.1 è®¾è®¡è¯­è¨€

**ä¸»é¢˜**: æ·±è‰²æ¨¡å¼ï¼Œç±»ä¼¼ Dreamina é£æ ¼

**è‰²å½©ç³»ç»Ÿ**:
```css
/* èƒŒæ™¯è‰² */
--bg-primary: #0a0a0f              /* ä¸»èƒŒæ™¯ */
--canvas-bg: #0f0f12               /* ç”»å¸ƒèƒŒæ™¯ */
--canvas-sidebar-bg: #141419       /* ä¾§è¾¹æ èƒŒæ™¯ */

/* æ–‡å­—é¢œè‰² (åŸºäºç™½è‰²çš„é€æ˜åº¦) */
--text-primary: rgba(224, 245, 255, 0.92)     /* ä¸»æ–‡å­— */
--text-secondary: rgba(224, 245, 255, 0.6)    /* æ¬¡è¦æ–‡å­— */
--text-tertiary: rgba(224, 245, 255, 0.48)    /* ä¸‰çº§æ–‡å­— */
--text-placeholder: rgba(224, 245, 255, 0.36) /* å ä½ç¬¦ */

/* å“ç‰Œè‰² */
--brand-main-default: #00CAE0      /* é’è‰² */
--brand-main-hover: #00b8cc
--brand-main-pressed: #009eb0

/* æ¯›ç»ç’ƒæ•ˆæœ */
--canvas-float-block-default: rgba(32, 33, 39, 0.72)
--canvas-float-backdrop-blur: 20px
```

### 4.2 è§†è§‰æ•ˆæœ

**æ¯›ç»ç’ƒ (Glassmorphism)**:
```css
background: var(--canvas-float-block-default);
backdrop-filter: blur(var(--canvas-float-backdrop-blur));
```

**é˜´å½±**:
```css
--shadow-generator-float-block:
  0 4px 8px 0 rgba(0, 0, 0, 0.03),
  0 2px 4px 0 rgba(0, 0, 0, 0.02);
```

**è¾¹æ¡†**:
```css
border: 0.5px solid var(--stroke-tertiary);
```

### 4.3 äº¤äº’åé¦ˆ

**æŒ‰é’®çŠ¶æ€**:
- Default: é€æ˜èƒŒæ™¯
- Hover: `rgba(204, 221, 255, 0.12)`
- Pressed: `rgba(204, 221, 255, 0.16)`
- Active: å“ç‰Œè‰²

**è¿‡æ¸¡åŠ¨ç”»**:
```css
transition: all 0.2s ease;
transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);
```

---

## 5. æ•°æ®æµå’ŒçŠ¶æ€ç®¡ç†

### 5.1 çŠ¶æ€æµå‘

```
App.vue (æ ¹çŠ¶æ€)
â”œâ”€â”€ zoom (ç¼©æ”¾) â†’ InfiniteCanvas, BottomToolbar
â”œâ”€â”€ selectedImage (é€‰ä¸­å›¾ç‰‡) â†’ InfiniteCanvas â†’ App (å±•ç¤ºé¡¶éƒ¨å·¥å…·æ )
â”œâ”€â”€ rightPanelOpen (é¢æ¿å¼€å…³) â†’ Header, PromptEditor, RightPanel
â””â”€â”€ pendingMessage (å¾…å‘æ¶ˆæ¯) â†’ PromptEditor â†’ RightPanel
```

### 5.2 äº‹ä»¶é€šä¿¡

**Props Down, Events Up æ¨¡å¼**:

```javascript
// App.vue
<InfiniteCanvas
  :zoom="zoom"                              // ä¼ é€’ zoom çŠ¶æ€
  @zoom-change="handleZoomChange"           // æ¥æ”¶ç¼©æ”¾å˜åŒ–
  @selection-change="handleSelectionChange" // æ¥æ”¶é€‰æ‹©å˜åŒ–
/>

// InfiniteCanvas.vue
emit('zoom-change', newZoom)                // å‘é€ç¼©æ”¾äº‹ä»¶
emit('selection-change', selectedImage)     // å‘é€é€‰æ‹©äº‹ä»¶
```

### 5.3 æ•°æ®ç»“æ„

**å›¾ç‰‡æ•°æ®æ¨¡å‹**:
```javascript
{
  id: Number,           // å”¯ä¸€æ ‡è¯†
  src: String,          // å›¾ç‰‡ URL
  index: Number,        // ç½‘æ ¼ä½ç½®ç´¢å¼•
  w: Number,            // å®½åº¦ (px)
  h: Number             // é«˜åº¦ (px)
}
```

**æ¶ˆæ¯æ•°æ®æ¨¡å‹** (è§ 3.7.1)

---

## 6. ç”¨æˆ·ä½“éªŒè®¾è®¡

### 6.1 äº¤äº’æ¨¡å¼

**1. ç”»å¸ƒæ“ä½œ**
- ç©ºæ ¼ + æ‹–æ‹½ï¼šç§»åŠ¨ç”»å¸ƒ
- Ctrl + æ»šè½®ï¼šç¼©æ”¾ç”»å¸ƒ
- æ»šè½®ï¼šå¹³ç§»ç”»å¸ƒ
- Escï¼šå–æ¶ˆé€‰æ‹©

**2. å›¾ç‰‡æ“ä½œ**
- ç‚¹å‡»ï¼šé€‰ä¸­å›¾ç‰‡
- æ‹–æ‹½ï¼šé‡æ’åºï¼ˆè¶…è¿‡ 5px è§¦å‘ï¼‰
- å››è§’æ‹–æ‹½ï¼šè°ƒæ•´å°ºå¯¸

**3. æç¤ºè¯ç¼–è¾‘**
- ç‚¹å‡»å±•å¼€ï¼šæ˜¾ç¤ºå®Œæ•´å·¥å…·æ 
- Enterï¼šå‘é€æ¶ˆæ¯
- å¤–éƒ¨ç‚¹å‡»ï¼šè‡ªåŠ¨æ”¶èµ·ï¼ˆç©ºå†…å®¹æ—¶ï¼‰

**4. å¯¹è¯é¢æ¿**
- ä¸Šä¼ å›¾ç‰‡ï¼šæ”¯æŒå¤šå¼ ï¼Œå †å å±•ç¤º
- ç‚¹å‡»å›¾ç‰‡ï¼šå…¨å±é¢„è§ˆ
- Enterï¼šå‘é€æ¶ˆæ¯

### 6.2 è§†è§‰åé¦ˆ

**çŠ¶æ€æŒ‡ç¤º**:
- é€‰ä¸­å›¾ç‰‡ï¼š3px é’è‰²è¾¹æ¡†
- æ‹–æ‹½ä¸­ï¼šåŠé€æ˜æ˜¾ç¤º + é˜´å½±
- Hoverï¼šèƒŒæ™¯é«˜äº® + é¢œè‰²å˜åŒ–
- å·¥å…·æç¤ºï¼šå»¶è¿Ÿ 0.3s æ˜¾ç¤º

**åŠ¨ç”»æ•ˆæœ**:
- ç»„ä»¶åˆ‡æ¢ï¼šfade + scale
- é¢æ¿å±•å¼€ï¼šå®½åº¦è¿‡æ¸¡ 0.2s
- å›¾ç‰‡å †å ï¼šæ—‹è½¬ + ä½ç§» 0.35s
- å·¥å…·æ å‡ºç°ï¼šopacity + translateY

### 6.3 å“åº”å¼è®¾è®¡

**å¸ƒå±€é€‚é…**:
- å³ä¾§é¢æ¿ï¼šå›ºå®š 440px
- ä¸»å†…å®¹åŒºï¼š`calc(100% - var(--right-panel-width))`
- æç¤ºè¯ç¼–è¾‘å™¨ï¼š
  - æŠ˜å ï¼šmax-width 480px
  - å±•å¼€ï¼šmax-width 680px

**æœ€å°å°ºå¯¸**:
- å›¾ç‰‡æœ€å°å®½åº¦ï¼š200px
- å·¥å…·æ æŒ‰é’®ï¼š32px Ã— 32px
- ç¼©æ”¾èŒƒå›´ï¼š1% - 200%

---

## 7. æ€§èƒ½ä¼˜åŒ–

### 7.1 å›¾ç‰‡åŠ è½½

```html
<img :src="img.src" crossorigin="anonymous" loading="lazy" />
```
- **lazy loading**: å»¶è¿ŸåŠ è½½ç”»å¸ƒå¤–å›¾ç‰‡
- **crossorigin**: æ”¯æŒè·¨åŸŸå›¾ç‰‡
- **å›ºå®šå°ºå¯¸**: å‡å°‘é‡æ’

### 7.2 æ ·å¼ä¼˜åŒ–

```css
will-change: transform, width;
transform: translate3d(0, 0, 0);  /* GPU åŠ é€Ÿ */
```

### 7.3 äº‹ä»¶å¤„ç†

**èŠ‚æµ/å»æŠ–**:
- æ»šè½®ç¼©æ”¾ï¼šå®æ—¶å“åº”
- æ‹–æ‹½ç§»åŠ¨ï¼šrequestAnimationFrame
- çª—å£ resizeï¼šé˜²æŠ–å¤„ç†

**äº‹ä»¶å§”æ‰˜**:
```javascript
// å…¨å±€ç›‘å¬ï¼Œé¿å…æ¯ä¸ªå›¾ç‰‡ç»‘å®šäº‹ä»¶
window.addEventListener('mousemove', handleMouseMove)
window.addEventListener('mouseup', handleMouseUp)
```

---

## 8. æŠ€æœ¯äº®ç‚¹

### 8.1 æ— é™ç”»å¸ƒå®ç°

**åŒåæ ‡ç³»ç»Ÿ**:
- **ç”»å¸ƒåæ ‡ç³»**: å›¾ç‰‡çš„ç»å¯¹ä½ç½®
- **å±å¹•åæ ‡ç³»**: è§†å£å˜æ¢åçš„ä½ç½®

**åæ ‡è½¬æ¢**:
```javascript
// ç”»å¸ƒåæ ‡ â†’ å±å¹•åæ ‡
screenX = viewport.x + canvasX * viewport.scale
screenY = viewport.y + canvasY * viewport.scale

// å±å¹•åæ ‡ â†’ ç”»å¸ƒåæ ‡
canvasX = (screenX - viewport.x) / viewport.scale
canvasY = (screenY - viewport.y) / viewport.scale
```

### 8.2 æ‹–æ‹½é‡æ’åºç®—æ³•

**å®æ—¶é¿è®©**:
```javascript
const getDisplayIndex = (img) => {
  if (hoverIdx < originalIdx) {
    // å‘å‰æ‹–æ‹½ï¼Œä¸­é—´çš„å›¾ç‰‡åç§»
    if (img.index >= hoverIdx && img.index < originalIdx) {
      return img.index + 1
    }
  } else if (hoverIdx > originalIdx) {
    // å‘åæ‹–æ‹½ï¼Œä¸­é—´çš„å›¾ç‰‡å‰ç§»
    if (img.index > originalIdx && img.index <= hoverIdx) {
      return img.index - 1
    }
  }
  return img.index
}
```

**æ›´æ–° index**:
```javascript
if (targetIndex < currentIndex) {
  images.value.forEach(img => {
    if (img.index >= targetIndex && img.index < currentIndex) {
      img.index++
    }
  })
} else {
  images.value.forEach(img => {
    if (img.index > currentIndex && img.index <= targetIndex) {
      img.index--
    }
  })
}
draggedItem.index = targetIndex
```

### 8.3 å †å å¡ç‰‡æ•ˆæœ

**CSS å˜é‡åŠ¨ç”»**:
```css
.stack-item {
  transform: rotate(var(--rotate)) translateX(var(--translate-x));
  transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
}
```

**åŠ¨æ€è®¡ç®—**:
```javascript
:style="{
  '--rotate': isExpanded ? '0deg' : `${(idx - total + 1) * 8}deg`,
  '--translate-x': isExpanded ? `${idx * 62}px` : '0px'
}"
```

### 8.4 æ¯›ç»ç’ƒæ•ˆæœ

**åŠé€æ˜èƒŒæ™¯ + æ¨¡ç³Š**:
```css
background: rgba(32, 33, 39, 0.72);
backdrop-filter: blur(20px);
-webkit-backdrop-filter: blur(20px);
```

---

## 9. å¾…å®Œå–„åŠŸèƒ½

### 9.1 åŸºç¡€åŠŸèƒ½

**æ–‡ä»¶ç³»ç»Ÿ**:
- [ ] é¡¹ç›®ä¿å­˜/åŠ è½½
- [ ] å¯¼å‡ºå›¾ç‰‡ï¼ˆå•å¼ /æ‰¹é‡ï¼‰
- [ ] å†å²è®°å½•ç®¡ç†

**å›¾ç‰‡ç¼–è¾‘**:
- [ ] å±€éƒ¨é‡ç»˜å®ç°
- [ ] è¶…æ¸…åŒ–æ¥å£
- [ ] æŠ å›¾åŠŸèƒ½
- [ ] æ‰©å›¾åŠŸèƒ½
- [ ] æ¶ˆé™¤ç¬”å·¥å…·
- [ ] æ–‡å­—é‡ç»˜

**å¯¹è¯åŠŸèƒ½**:
- [ ] çœŸå® AI æ¥å£é›†æˆ
- [ ] æ¶ˆæ¯æŒä¹…åŒ–
- [ ] å¯¹è¯å†å²ç®¡ç†
- [ ] å¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡

### 9.2 äº¤äº’ä¼˜åŒ–

- [ ] å¤šé€‰å›¾ç‰‡ï¼ˆCtrl/Cmd + ç‚¹å‡»ï¼‰
- [ ] æ¡†é€‰åŠŸèƒ½
- [ ] å¤åˆ¶/ç²˜è´´/åˆ é™¤å¿«æ·é”®
- [ ] æ’¤é”€/é‡åšåŠŸèƒ½
- [ ] å³é”®èœå•

### 9.3 æ€§èƒ½ä¼˜åŒ–

- [ ] è™šæ‹Ÿæ»šåŠ¨ï¼ˆå¤§é‡å›¾ç‰‡æ—¶ï¼‰
- [ ] å›¾ç‰‡æ‡’åŠ è½½ä¼˜åŒ–
- [ ] å¤§å›¾ç¼©ç•¥å›¾é¢„åŠ è½½
- [ ] Web Worker å¤„ç†å›¾ç‰‡

### 9.4 åä½œåŠŸèƒ½

- [ ] å¤šäººåä½œ
- [ ] è¯„è®ºç³»ç»Ÿ
- [ ] åˆ†äº«é“¾æ¥
- [ ] å¯¼å‡ºä¸ºé¡¹ç›®æ–‡ä»¶

---

## 10. å¼€å‘å»ºè®®

### 10.1 çŠ¶æ€ç®¡ç†å‡çº§

**å½“å‰**: ç»„ä»¶å†… ref/reactive
**å»ºè®®**: å¼•å…¥ Pinia è¿›è¡Œå…¨å±€çŠ¶æ€ç®¡ç†

```javascript
// stores/canvas.js
export const useCanvasStore = defineStore('canvas', {
  state: () => ({
    images: [],
    selectedImageId: null,
    viewport: { x: 0, y: 0, scale: 1 }
  }),
  actions: {
    addImage(image) { /* ... */ },
    updateImage(id, updates) { /* ... */ }
  }
})
```

### 10.2 API å±‚æŠ½è±¡

**å»ºè®®**: åˆ›å»ºç»Ÿä¸€çš„ API æœåŠ¡å±‚

```javascript
// api/image.js
export const imageApi = {
  generate(prompt, options) { /* ... */ },
  upscale(imageId) { /* ... */ },
  removeBackground(imageId) { /* ... */ }
}
```

### 10.3 ç±»å‹å®‰å…¨

**å»ºè®®**: å¼•å…¥ TypeScript

```typescript
interface ImageData {
  id: number
  src: string
  index: number
  w: number
  h: number
}

interface Message {
  id: number
  type: 'user' | 'ai-images' | 'user-with-ref' | 'generated-images'
  content?: string
  images?: string[]
  // ...
}
```

### 10.4 ç»„ä»¶æ‹†åˆ†

**InfiniteCanvas.vue** (700+ è¡Œ) å»ºè®®æ‹†åˆ†ä¸º:
- `CanvasCore.vue` - ç”»å¸ƒæ ¸å¿ƒé€»è¾‘
- `ImageGrid.vue` - å›¾ç‰‡ç½‘æ ¼æ¸²æŸ“
- `ImageItem.vue` - å•ä¸ªå›¾ç‰‡é¡¹
- `FloatingToolbar.vue` - æµ®åŠ¨å·¥å…·æ 
- `SelectionOverlay.vue` - é€‰ä¸­æ¡†è¦†ç›–å±‚

### 10.5 æµ‹è¯•

**å»ºè®®**: æ·»åŠ å•å…ƒæµ‹è¯•å’Œ E2E æµ‹è¯•

```javascript
// tests/InfiniteCanvas.spec.js
describe('InfiniteCanvas', () => {
  it('should calculate grid position correctly', () => {
    expect(getGridPosition(0)).toEqual({ x: 192, y: 192 })
  })
})
```

---

## 11. ä¸å³æ¢¦AIçš„åŠŸèƒ½å¯¹æ¯”

### 11.1 å³æ¢¦AIæ ¸å¿ƒåŠŸèƒ½åˆ†æ

**å³æ¢¦AI** (jimeng.jianying.com) æ˜¯å­—èŠ‚è·³åŠ¨æ——ä¸‹çš„AIåˆ›ä½œå¹³å°ï¼Œæä¾›ä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½ï¼š

#### åŠŸèƒ½æ¨¡å—

| åŠŸèƒ½ | å³æ¢¦AI | CanvasMind ç°çŠ¶ | ä¼˜å…ˆçº§ |
|-----|--------|----------------|--------|
| **æ–‡ç”Ÿå›¾** | âœ… æ”¯æŒä¸­æ–‡æç¤ºè¯ | âœ… æç¤ºè¯ç¼–è¾‘å™¨å·²å°±ä½ | P0 - éœ€æ¥å…¥API |
| **å›¾ç”Ÿå›¾** | âœ… ä¿æŒä¸»ä½“ç‰¹å¾ | ğŸ”² æœªå®ç° | P1 - æ ¸å¿ƒåŠŸèƒ½ |
| **æ™ºèƒ½ç”»å¸ƒ** | âœ… å¤šå›¾å±‚ç¼–è¾‘ | âœ… æ— é™ç”»å¸ƒå·²å®ç° | P0 - å·²å®ŒæˆåŸºç¡€ |
| **å±€éƒ¨é‡ç»˜** | âœ… ç²¾å‡†åŒºåŸŸç¼–è¾‘ | ğŸ”² UIå·²æœ‰ï¼Œéœ€å®ç° | P1 - æ ¸å¿ƒåŠŸèƒ½ |
| **æ™ºèƒ½æ‰©å›¾** | âœ… ä¸€é”®æ‰©å±• | ğŸ”² UIå·²æœ‰ï¼Œéœ€å®ç° | P1 - æ ¸å¿ƒåŠŸèƒ½ |
| **æ™ºèƒ½æŠ å›¾** | âœ… è‡ªåŠ¨åˆ†ç¦»èƒŒæ™¯ | ğŸ”² UIå·²æœ‰ï¼Œéœ€å®ç° | P1 - æ ¸å¿ƒåŠŸèƒ½ |
| **è¶…æ¸…æ”¾å¤§** | âœ… 4K/8K é«˜æ¸… | ğŸ”² UIå·²æœ‰ï¼Œéœ€å®ç° | P2 - å¢å¼ºåŠŸèƒ½ |
| **æ–‡ç”Ÿè§†é¢‘** | âœ… æ”¯æŒ | ğŸ”² æœªè§„åˆ’ | P3 - æœªæ¥åŠŸèƒ½ |
| **é¦–å°¾å¸§æ§åˆ¶** | âœ… è§†é¢‘ç”Ÿæˆ | ğŸ”² æœªè§„åˆ’ | P3 - æœªæ¥åŠŸèƒ½ |
| **ç¤¾åŒºæ¢ç´¢** | âœ… åˆ›ä½œåŒæ¬¾ | ğŸ”² æœªè§„åˆ’ | P2 - ç¤¾äº¤åŠŸèƒ½ |

### 11.2 CanvasMind çš„å·®å¼‚åŒ–ä¼˜åŠ¿

#### å·²å®ç°çš„ç‹¬ç‰¹åŠŸèƒ½

1. **æ— é™ç”»å¸ƒè‡ªç”±åº¦**
   - å³æ¢¦AI: å›ºå®šç”»å¸ƒå°ºå¯¸ï¼Œå›¾å±‚å¼ç¼–è¾‘
   - CanvasMind: æ— é™æ‰©å±•çš„ç½‘æ ¼ç”»å¸ƒï¼Œè‡ªç”±æ’åˆ—

2. **æ‹–æ‹½é‡æ’åº**
   - å³æ¢¦AI: å›¾å±‚é¡ºåºè°ƒæ•´
   - CanvasMind: ç½‘æ ¼ä¸­çš„å›¾ç‰‡å¯æ‹–æ‹½é‡æ–°æ’åˆ—ï¼Œå®æ—¶é¿è®©æ•ˆæœ

3. **å¯¹è¯å¼äº¤äº’**
   - å³æ¢¦AI: æç¤ºè¯è¾“å…¥æ¡†
   - CanvasMind: å®Œæ•´çš„å¯¹è¯é¢æ¿ï¼Œæ”¯æŒå¤šè½®å¯¹è¯å’Œå†å²è®°å½•

4. **å›¾ç‰‡æ‰¹é‡ç®¡ç†**
   - å³æ¢¦AI: å•æ¬¡ç”Ÿæˆç®¡ç†
   - CanvasMind: ç½‘æ ¼ä¸­å¯åŒæ—¶ç®¡ç†å¤šç»„ç”Ÿæˆç»“æœ

#### è§„åˆ’ä¸­çš„åˆ›æ–°åŠŸèƒ½

5. **Agent æ¨¡å¼**
   - æ™ºèƒ½æ¨èæç¤ºè¯
   - çµæ„Ÿæœç´¢å’Œåˆ›æ„è®¾è®¡è¾…åŠ©
   - è‡ªåŠ¨å‚æ•°ä¼˜åŒ–

6. **åä½œåŠŸèƒ½**
   - å¤šäººå®æ—¶åä½œï¼ˆå³æ¢¦AIä¸æ”¯æŒï¼‰
   - è¯„è®ºå’Œæ‰¹æ³¨ç³»ç»Ÿ
   - ç‰ˆæœ¬å†å²ç®¡ç†

7. **é¡¹ç›®åŒ–ç®¡ç†**
   - ä¿å­˜/åŠ è½½é¡¹ç›®æ–‡ä»¶
   - å¤šé¡¹ç›®åˆ‡æ¢
   - å¯¼å‡ºå®Œæ•´ç”»å¸ƒ

### 11.3 åŠŸèƒ½è·¯çº¿å›¾ï¼ˆå¯¹æ ‡å³æ¢¦AIï¼‰

#### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€AIèƒ½åŠ›ï¼ˆP0ï¼‰
```
âœ… æ— é™ç”»å¸ƒåŸºç¡€æ¶æ„
âœ… å›¾ç‰‡ç½‘æ ¼ç®¡ç†
âœ… æç¤ºè¯ç¼–è¾‘å™¨
ğŸ”² æ–‡ç”Ÿå›¾ API æ¥å…¥
ğŸ”² åŸºç¡€å›¾åƒç”Ÿæˆ
```

#### ç¬¬äºŒé˜¶æ®µï¼šç¼–è¾‘å·¥å…·ï¼ˆP1ï¼‰
```
ğŸ”² å±€éƒ¨é‡ç»˜å®ç°
   - ç”»ç¬”é€‰åŒºå·¥å…·
   - å±€éƒ¨æç¤ºè¯è¾“å…¥
   - è’™ç‰ˆç¼–è¾‘
ğŸ”² æ™ºèƒ½æ‰©å›¾å®ç°
   - è¾¹ç•Œè¯†åˆ«
   - æ™ºèƒ½å¡«å……
   - æ–¹å‘é€‰æ‹©ï¼ˆä¸Šä¸‹å·¦å³ï¼‰
ğŸ”² æ™ºèƒ½æŠ å›¾å®ç°
   - è‡ªåŠ¨ä¸»ä½“è¯†åˆ«
   - è¾¹ç¼˜ä¼˜åŒ–
   - èƒŒæ™¯é€æ˜åŒ–
ğŸ”² å›¾ç”Ÿå›¾å®ç°
   - å‚è€ƒå›¾ä¸Šä¼ 
   - é£æ ¼è¿ç§»
   - ä¸»ä½“ä¿æŒ
```

#### ç¬¬ä¸‰é˜¶æ®µï¼šé«˜çº§åŠŸèƒ½ï¼ˆP2ï¼‰
```
ğŸ”² è¶…æ¸…æ”¾å¤§
ğŸ”² æ¶ˆé™¤ç¬”å·¥å…·
ğŸ”² ç”»é¢å¾®è°ƒ
ğŸ”² æ–‡å­—é‡ç»˜
ğŸ”² å¤šå›¾å±‚ç®¡ç†
ğŸ”² ç¤¾åŒºæ¢ç´¢
```

#### ç¬¬å››é˜¶æ®µï¼šåˆ›æ–°åŠŸèƒ½ï¼ˆP3ï¼‰
```
ğŸ”² å¤šäººåä½œ
ğŸ”² æ–‡ç”Ÿè§†é¢‘
ğŸ”² AI è§†é¢‘å‰ªè¾‘
ğŸ”² 3D æ¨¡å‹ç”Ÿæˆ
```

### 11.4 æŠ€æœ¯å®ç°å·®å¼‚

#### å‰ç«¯æ¶æ„
| ç»´åº¦ | å³æ¢¦AI | CanvasMind |
|-----|--------|------------|
| **æ¡†æ¶** | React (æ¨æµ‹) | Vue 3 |
| **æ„å»ºå·¥å…·** | Webpack/Vite | Vite |
| **ç”»å¸ƒå®ç°** | Canvas/WebGL | HTML/CSS Transform |
| **çŠ¶æ€ç®¡ç†** | Redux (æ¨æµ‹) | ç»„ä»¶å†…çŠ¶æ€ â†’ Pinia (è®¡åˆ’) |

#### äº¤äº’æ¨¡å¼
| ç»´åº¦ | å³æ¢¦AI | CanvasMind |
|-----|--------|------------|
| **å¯¼èˆª** | é¡¶éƒ¨æ ‡ç­¾åˆ‡æ¢ | ä¾§è¾¹å·¥å…·æ  + æµ®åŠ¨é¢æ¿ |
| **ç”Ÿæˆå…¥å£** | åº•éƒ¨å›ºå®šè¾“å…¥æ¡† | åº•éƒ¨æµ®åŠ¨èƒ¶å›Šï¼ˆå¯å±•å¼€ï¼‰ |
| **ç»“æœå±•ç¤º** | ç½‘æ ¼åˆ—è¡¨ | æ— é™ç”»å¸ƒç½‘æ ¼ |
| **ç¼–è¾‘æ¨¡å¼** | å¼¹çª—/ä¾§è¾¹æ  | æµ®åŠ¨å·¥å…·æ  + å³ä¾§é¢æ¿ |

### 11.5 API é›†æˆéœ€æ±‚ï¼ˆå¯¹æ ‡å³æ¢¦AIï¼‰

#### æ ¸å¿ƒ API æ¥å£

```javascript
// api/jimeng.js (ç¤ºä¾‹æ¥å£è®¾è®¡)

// 1. æ–‡ç”Ÿå›¾
export const textToImage = async (params) => {
  // POST /api/text-to-image
  return {
    prompt: string,
    model: 'sd-xl' | 'midjourney',
    style: string,
    aspectRatio: '1:1' | '3:4' | '16:9',
    quality: 'standard' | 'hd' | '4k'
  }
}

// 2. å›¾ç”Ÿå›¾
export const imageToImage = async (params) => {
  // POST /api/image-to-image
  return {
    imageUrl: string,
    prompt: string,
    strength: number, // 0-1
    keepSubject: boolean
  }
}

// 3. å±€éƒ¨é‡ç»˜
export const inpaint = async (params) => {
  // POST /api/inpaint
  return {
    imageUrl: string,
    maskUrl: string,
    prompt: string
  }
}

// 4. æ™ºèƒ½æ‰©å›¾
export const outpaint = async (params) => {
  // POST /api/outpaint
  return {
    imageUrl: string,
    direction: 'top' | 'bottom' | 'left' | 'right',
    expandSize: number
  }
}

// 5. æ™ºèƒ½æŠ å›¾
export const removeBackground = async (params) => {
  // POST /api/remove-bg
  return {
    imageUrl: string,
    precision: 'auto' | 'high'
  }
}

// 6. è¶…æ¸…æ”¾å¤§
export const upscale = async (params) => {
  // POST /api/upscale
  return {
    imageUrl: string,
    scale: 2 | 4 | 8,
    quality: 'balanced' | 'quality'
  }
}
```

#### é‰´æƒå’Œé™æµ

```javascript
// api/auth.js
export const authConfig = {
  apiKey: process.env.VITE_JIMENG_API_KEY,
  baseURL: 'https://api.jimeng.jianying.com',

  // é™æµé…ç½®ï¼ˆå‚è€ƒå³æ¢¦AIï¼‰
  rateLimit: {
    textToImage: 10, // 10æ¬¡/å°æ—¶
    upscale: 5,      // 5æ¬¡/å°æ—¶
    inpaint: 20      // 20æ¬¡/å°æ—¶
  },

  // ç§¯åˆ†ç³»ç»Ÿ
  credits: {
    textToImage: 1,
    imageToImage: 2,
    inpaint: 3,
    upscale: 5
  }
}
```

### 11.6 UI/UX å¯¹æ ‡æ”¹è¿›

#### å³æ¢¦AIçš„ä¼˜ç§€è®¾è®¡

1. **è‹±é›„åŒºè®¾è®¡** - æ¸…æ™°çš„ä»·å€¼ä¸»å¼ 
2. **åŠŸèƒ½å¡ç‰‡** - ç›´è§‚çš„åŠŸèƒ½å±•ç¤º
3. **ç¤¾åŒºå±•ç¤º** - æ¿€å‘åˆ›ä½œçµæ„Ÿ
4. **é¦–å°¾å¸§æ§åˆ¶** - åˆ›æ–°çš„è§†é¢‘ç”Ÿæˆäº¤äº’

#### CanvasMind å¯å€Ÿé‰´çš„ç‚¹

```javascript
// å»ºè®®æ–°å¢ç»„ä»¶

// 1. é¦–é¡µ Landing Page
components/
â”œâ”€â”€ HeroSection.vue       // è‹±é›„åŒº
â”œâ”€â”€ FeatureCards.vue      // åŠŸèƒ½å¡ç‰‡
â”œâ”€â”€ CommunityGallery.vue  // ç¤¾åŒºä½œå“
â””â”€â”€ CTAButton.vue         // è¡ŒåŠ¨å¬å”¤

// 2. ç”»å¸ƒå¢å¼º
components/canvas/
â”œâ”€â”€ LayerPanel.vue        // å›¾å±‚é¢æ¿ï¼ˆå‚è€ƒå³æ¢¦AIï¼‰
â”œâ”€â”€ StylePresets.vue      // é£æ ¼é¢„è®¾
â”œâ”€â”€ HistoryTimeline.vue   // å†å²æ—¶é—´çº¿
â””â”€â”€ QuickActions.vue      // å¿«æ·æ“ä½œ

// 3. ç”Ÿæˆå‚æ•°é¢æ¿
components/generation/
â”œâ”€â”€ ModelSelector.vue     // æ¨¡å‹é€‰æ‹©
â”œâ”€â”€ StyleSelector.vue     // é£æ ¼é€‰æ‹©
â”œâ”€â”€ AspectRatio.vue       // å®½é«˜æ¯”
â””â”€â”€ AdvancedParams.vue    // é«˜çº§å‚æ•°
```

---

## 12. éƒ¨ç½²å»ºè®®

### 11.1 æ„å»ºä¼˜åŒ–

```javascript
// vite.config.js
export default defineConfig({
  build: {
    rollupOptions: {
      output: {
        manualChunks: {
          'vue': ['vue'],
          'ui': ['./src/components/Header.vue', ...]
        }
      }
    }
  }
})
```

### 11.2 CDN é…ç½®

**å›¾ç‰‡ CDN**: ä½¿ç”¨ OSS + CDN åŠ é€Ÿ
**é™æ€èµ„æº CDN**: Vercel / Cloudflare Pages

### 11.3 ç¯å¢ƒé…ç½®

```javascript
// .env.production
VITE_API_BASE_URL=https://api.example.com
VITE_CDN_URL=https://cdn.example.com
```

---

## 12. æ€»ç»“

### 12.1 ä¼˜åŠ¿

1. **ç°ä»£æŠ€æœ¯æ ˆ**: Vue 3 + Viteï¼Œå¼€å‘ä½“éªŒä¼˜ç§€
2. **äº¤äº’è®¾è®¡**: æ— é™ç”»å¸ƒ + æ‹–æ‹½é‡æ’åºï¼Œç”¨æˆ·ä½“éªŒæµç•…
3. **è§†è§‰è®¾è®¡**: æ·±è‰²æ¨¡å¼ + æ¯›ç»ç’ƒæ•ˆæœï¼Œç¬¦åˆç°ä»£å®¡ç¾
4. **ä»£ç ç»„ç»‡**: ç»„ä»¶èŒè´£æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤

### 12.2 æ”¹è¿›ç©ºé—´

1. **çŠ¶æ€ç®¡ç†**: éœ€è¦å¼•å…¥ Pinia ç»Ÿä¸€ç®¡ç†
2. **ç±»å‹å®‰å…¨**: å»ºè®®è¿ç§»åˆ° TypeScript
3. **æµ‹è¯•è¦†ç›–**: ç¼ºå°‘å•å…ƒæµ‹è¯•å’Œ E2E æµ‹è¯•
4. **æ€§èƒ½ä¼˜åŒ–**: å¤§é‡å›¾ç‰‡æ—¶éœ€è¦è™šæ‹Ÿæ»šåŠ¨

### 12.3 é€‚ç”¨åœºæ™¯

- AI å›¾åƒç”Ÿæˆå·¥å…·
- è®¾è®¡åä½œå¹³å°
- å›¾ç‰‡ç®¡ç†ç³»ç»Ÿ
- åˆ›æ„å·¥ä½œå°

---

**æ–‡æ¡£ç”Ÿæˆæ—¶é—´**: 2026-01-01
**é¡¹ç›®ç‰ˆæœ¬**: 0.0.0
**åˆ†æå·¥å…·**: Claude Code
